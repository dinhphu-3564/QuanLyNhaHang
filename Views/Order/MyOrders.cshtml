@model List<Web_QLNhaHang.Models.Order>
@{
    ViewData["Title"] = "Đơn hàng của tôi";
}

<!-- Page Banner -->
<div class="page-banner">
    <div class="container">
        <h1>Đơn hàng của tôi</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Trang chủ</a></li>
                <li class="breadcrumb-item active" aria-current="page">Đơn hàng của tôi</li>
            </ol>
        </nav>
    </div>
</div>

<div class="container mb-5">
    @if (Model != null && Model.Any())
    {
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-shopping-bag me-2"></i>Lịch sử đơn hàng</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Mã đơn</th>
                                <th>Ngày đặt</th>
                                <th>Tổng tiền</th>
                                <th>Trạng thái</th>
                                <th>Thanh toán</th>
                                <th>Phương thức</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var order in Model)
                            {
                                <tr>
                                    <td><strong>@order.OrderNumber</strong></td>
                                    <td>@order.OrderDate.ToString("dd/MM/yyyy HH:mm")</td>
                                    <td class="fw-bold text-danger">@order.TotalAmount.ToString("N0") ₫</td>
                                    <td>
                                        @{
                                            var statusBadgeClass = order.Status switch
                                            {
                                                "Hoàn thành" => "bg-success",
                                                "Hủy" => "bg-danger",
                                                _ => "bg-warning"
                                            };
                                        }
                                        <span class="badge @statusBadgeClass">
                                            @order.Status
                                        </span>
                                    </td>
                                    <td>
                                        @{
                                            var paymentBadgeClass = order.PaymentStatus == "Đã thanh toán" ? "bg-success" : "bg-secondary";
                                        }
                                        <span class="badge @paymentBadgeClass">
                                            <i class="fas @(order.PaymentStatus == "Đã thanh toán" ? "fa-check-circle" : "fa-clock") me-1"></i>
                                            @order.PaymentStatus
                                        </span>
                                    </td>
                                    <td>
                                        @if (order.PaymentMethod == "VNPay")
                                        {
                                            <span class="badge bg-info">
                                                <i class="fas fa-university me-1"></i>VNPay
                                            </span>
                                        }
                                        else
                                        {
                                            <span class="badge bg-warning">
                                                <i class="fas fa-money-bill-wave me-1"></i>Tiền mặt
                                            </span>
                                        }
                                    </td>
                                    <td>
                                        <a asp-action="OrderSuccess" asp-route-orderNumber="@order.OrderNumber" 
                                           class="btn btn-sm btn-info">
                                            <i class="fas fa-eye me-1"></i>Xem chi tiết
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="card">
            <div class="card-body text-center py-5">
                <i class="fas fa-shopping-bag fa-4x text-muted mb-3"></i>
                <h4>Chưa có đơn hàng nào</h4>
                <p class="text-muted">Bạn chưa đặt đơn hàng nào. Hãy khám phá menu của chúng tôi!</p>
                <a asp-controller="Menu" asp-action="Index" class="btn btn-primary mt-3">
                    <i class="fas fa-utensils me-2"></i>Xem menu
                </a>
            </div>
        </div>
    }
</div>

<style>
    .page-banner {
        background: linear-gradient(135deg, #2d5a3d 0%, #1a472a 100%);
        color: white;
        padding: 3rem 0;
        margin-bottom: 2rem;
    }

    .page-banner h1 {
        margin: 0;
        font-size: 2.5rem;
        font-weight: 700;
    }

    .breadcrumb {
        background: transparent;
        padding: 0;
        margin: 0.5rem 0 0 0;
    }

    .breadcrumb-item a {
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
    }

    .breadcrumb-item.active {
        color: white;
    }

    .table th {
        border-top: none;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
    }

    .table td {
        vertical-align: middle;
    }

    .badge {
        padding: 0.5rem 0.75rem;
        font-size: 0.85rem;
        font-weight: 500;
    }
</style>

